# sweater

# Добавляем Spring Security (пользователей и авторизацию).

https://www.youtube.com/watch?v=WDlifgLS8iQ

Ссылка на git репозиторий из видео:
https://github.com/drucoder/sweater/tree/SpringSecurity

Для начала нам необходимо найти нужный гайд на сайте Spring:
https://spring.io/guides/gs/securing-web/

Следуя руководству, нам необходимо сделать 2 страницы: публичную, роль которой у нас возьмет на себя страница greetings, и доступная после авторизации, роль которой возьмет на себя страница main. Нам потребуется только немного изменить мэппинг страниц и добавить ссылку с главной на приватную страницу.

Далее мы подключаем зависимость Spring Security, настраиваем модуль вэб-безопасности, и добавляем страницу авторизации.

По умолчанию, в Spring Security включен механизм CSRF и нам необходимо передавать со всеми формами ключ защиты. Для этого в файле настроек приложения application.properties нужно добавить строку настройки из блокнота:
#application.properties
spring.mustache.expose-request-attributes=true

В результате мы имеем простейший механизм авторизации в приложении. Проблема в том, что он использует фиксированные учетные записи, хранящиеся в оперативной памяти и все данные пользователей открыто лежать в исходном коде.

Для добавления возможности хранения учетных записей пользователей в БД, нам нужно изменить настройки Spring Security и создать доменный класс пользователя. Также, нам необходимо добавить страницу регистрации новых пользователей.
