
привет это канал и скот меня зовут
андрей продолжаем разбираться со
спаррингом сегодня мы к нашему
предложению свитер прикрутим
дополнительно авторизацию то есть это
spring security
возвращаемся на спринга и о переходе в
раздел гаец и строке поиска в гайдах
пишем секирин находим вот такой секретик
а вы про пикаешь заходим этот гайд
ссылочку я приложу в описании к видео и
видим что сразу нам здесь предлагает
сделать страничку хум хум страничку нас
уже есть только называется она у нас
грязинг мы сейчас ей мы переделаем что
по названию рейтинг корень страничку мы
не заметим как раз нам и рут и здесь
соответственно нужно сделать мы после
этого идем на страничку грешник здесь
убираем
не мы пишем юзер так здесь у нас будет
ссылочка на зиму ссылочку за хорошим
который будет как раз вести нами и пишем
но здесь вот мне нужна такая штучка есть
и соответственно это тоже уберем потому
что мы теперь на полстранички ничего не
принимаем
смотрим что у нас там дальше по
инструкции так и есть но ссылка на
какую-то страничку внутреннего хоккей и
там уже сделали страничка внутренние у
нас тоже уже есть это как раз наш main и
видим нечто новое о нам предлагает
сделать весь секунд файл копируем
заходим в наше приложение создаем новый
пакет конфиг конфиг и в нем создаем и
весь в висе вставляем то что теперь она
копировать что это такое это класс
который у нас содержит конфигурацию
нашего вот слоя и здесь как раз тот
случай когда нам не нужно создавать свой
контроллер
у нас здесь раздаются страничке которые
просто шаблон описаны на них нет никакой
логики нас нам олечка не устраивает нам
здесь вот это не надо потому что мы это
все нужно мы пили
нам нужен только от логин здесь
получается spring уже представляет на
систему авторизации нам нужно просто
активизировать да вот мы создаем свой
screen влаги на потому что у нас не
устроит какой-то там системы мы хотим
свой но логика нас вполне устраивает
системная поэтому просто вешаем
на лаги и указываем что нам нужен
logging шаблон который у нас пока что
еще нет идет дальше и смотрим что
система нам предлагает дальше настроить
spring security до добавить зависимой
зависимости у нас пока что нету копируем
и идем в наш по максималь и здесь
добавляем зависимость пишем security
идем дальше смотрим что у нас тут еще
происходит нам предлагается бы создать
чуевым security конфиг хорошо не будем
сопротивляться копируем идем опять в
конфиг и создаем новый класс который
называем web security config ну пока что
у нас здесь все устраивает только у нас
здесь вот он нам не нужен поэтому его
убираем сразу что мы здесь делаем это
класс который при старте приложения
конфигурирует web security system
заходит сюда передает на вход объект и
мы в нем включаем авторизацию указываем
что для вот этого пути на главный
строчкам который приходит пользователь
мы разрешаем полный доступ для всех
остальных запросов мы требуем
авторизацию сделаем вот так как бы
принято читабельность повышает вот так
логин пейдж нас находится на такой
маппинге
и разрешаем этим пользоваться всем и так
же еще включаем лагов и разрешаем им
пользоваться также всем здесь у нас
озеро tl сервис будет выдаваться системе
по требованию таким методом он на
создает в памяти менеджер который у нас
обслуживает записи учетные сократим
потому что мне лень его писать так много
букв авторизации
но metric села фиксов он помечен как
депре кейт а потому что он нужен только
для отладки ничего не шифрует ничего не
хранить при каждом перезапуске
приложения он замок создают пользователи
и собственно все идем дальше в
инструкция ага теперь нам предлагает
создать шаблон для логина копипастим не
надо переживать что я пропагандирую
copy-paste просто на этапе пока мы
обучаемся это наиболее простой способ
получить быстрый результат и
не потерять интерес к разработке то
дальнейшем и это все по выпиливаем и
copy-paste у нас будет ноль но мне нужно
time left
так эти строчки нам тоже не нужно и
здесь очищаем мусор все у нас получился
валидный
шаблон для пустошь форму логина
единственное что переименовать ее надо
свадьбы система или равно стаж теперь
нам предлагают на страничку нашего
лендинга
добавить кнопочку локаута не будем
сопротивляться они этот милый мир это у
нас главной страничке проект значит мы
добавляем кнопочку локаута так мы
добавили страничку локаута на нашу форму
которую пользователь видит только после
авторизации замечательное идем дальше
смотрим делаем наше приложение забитый
гол
это пока рановато нам нужно еще добавить
одну замечательную штуку здесь так как
мы используем усташ у нас не будет
автоматического пробрасывать офицеров
что такое сесарев это замечательная вещь
которая позволяет вам избежать хакерских
атак на ваш сайт то есть
обращаться к вашему серверу отправлять
него какие-то данные могут только те
страничке тот кот на java скрипте у
которого есть соответствующий токен
выданный сервером случае с там лифом
spring подсовывает его незаметно и сам
все там согласует так как мы работаем с
пустошь нам нужно выполнить кое-какие
настроечки идем в диск ссылочка на
которые я прикладываю описании к видео и
копируем вот эту строчку
то эта строчка дело она включает
дополнительные атрибуты для пустошь
spring комиссии в контроллере будет
отдавать дополнительные параметры и они
будут переходить шаблон теперь идем на
страничку логина и здесь добавляем
невидимое поле input так хи ду на и
подчёркивание си си и вылил выражением
усташ котором мы напишем csr с таким
теперь мы копируем это поле и вставляем
его
файл моему стаж здесь у нас для каждой
формочки нужно добавить эту поле потому
что любой запрос который не будет
сопровождаться этим токина он будет то
есть все формочки они будут просто
сервером
игнорироваться так попробуем запустить
приложение видим что у нас открылся в
день я переходим посылочки моим пейдж
форму логина
вводим учетные данные и попадаем на
страничку приложения проверим что все
работает все работает действительно
сходим на главную страничку на монтаж да
всем и авторизованы больше нам
залогиниться не предлагают теперь
попробуем сами out и здесь бы неплохо
добавить страничку замечательно у нас
перебрасывает на воде все работает как я
уже говорил использовать авторизацию и
намерен не очень удобно и каждого
пользователя вам придется добавлять
руками добавим возможность
самостоятельной авторизации для этого
нам необходимо хранить пользователей в
базе данных
немножечко модифицируем указанный код
для начала добавим объект базы данных
пользователь юзер и дополнительный
объект который не будет напрямую
хранится в базе данных
а как бы немножечко опосредованно эта
роль только роль это будет и нам то есть
перечисления им за не будет пока что все
вот на записи the used теперь я можно
закрыть и вернуться пользователь
пользователь помечаем что это entity
и хранится он будет в табличке с именем
you закат почему не юзер потому что под
крест не очень любит таблички которые
совпадают по имени с какими ключевыми
словами у него уже есть ручка юзер
которая соответственно
что занята теперь создаем поля айди
которая будет киннер этот и также
auto мы не хотим заморачиваться по
поводу генерация идиш ников пусть это
делает база данных wang
айди также у нас в пользователя будет
имя и жирные
также у нашего пользователя будет
password и в нашего пользователя будет
признак активности еще наших
пользователей будет ролевая система то
привилегированный пользователь
например модератор поэтому создаем
приватные от поля который будет
содержать в себе сэт ролей роли так как
раз финам который мы создали заранее и
называться будет роли
здесь нам необходимо добавить аннотации
во первых элемент collection которая
позволяет нам избавиться от головной
боли по формированию дополнительно
таблицы для хранения и нам а
и нам не такая сложная структура что там
что-то городить совсем особенное fitch
что такое fitch это параметр который
определяет как данные значение будут
погружаться относительно основной
сущности когда мы загружаем пользователь
роли его хранятся в отдельной таблицы и
нам необходимы и сгружать либо жадным
способом либо ленивым чем разница жадные
это
гипернет сразу же при запросе
пользователя будет держать все его роли
в случае с ленивой подгрузкой он
погрузит роли
только когда пользователи реально
обратиться к этому полю соответственно и
хорош когда у нас мало данных как в
случае с ролями это ускоряет работу но
потребляют немножко больше памяти ализе
хорош когда у нас много записей хранится
здесь например класс институт и он может
удержать себе несколько тысяч студентов
нам не нужно погружать всех студентов
сразу они нам нужны по мере
необходимости соответственно здесь лучше
поставить lazy
объект будет более легковесную но когда
мы обратимся к полю пройдёт некоторое
количество времени прежде чем
систему подгрузить записей из базы
данных нам здесь нужно ли жадная
подгрузка поэтому утром игр
следующая нотация kollection ты его она
описывает что данное поле у нас будет
храниться в отделе таблица для которой
мы не описывали мэт и пишем название
таблицы use of роль джейн коулс
здесь она сложена этот ужин колун
который мы пишем который у нас будет
называться иди юзер точнее use ради
это нам позволяет создать табличку для
вот этого набора ролей табличку и за
роль который будет соединяться с текущей
табличкой через озеро идеи нам нужно
указать что это у нас и но это и
установить что мы хотим его этот и нам
хранить в виде строки перегенерируем
геттер и сеттер
теперь нам нужно настроить
web security конфиг этот метод мы
удаляем потому что мы больше не хотим
использовать номере менеджеры мы хотим
брать пользователей из базы данных для
этого мы переопределяем метод конфигов
опыт конечный менеджер builder вот этот
и здесь две бисеринки кейша datasource
на нужен этого мы завтра варим метод так
у нас остались
неиспользуемые импорт и убираем их
делаем авто варит привык data sources of
the source нас генерируется spring и мы
его можем легко получить
направляем эти сос datasource нам нужен
для того чтобы мы номер мог ходить в
базу данных искать там пользователя их
роли следующим этапом добавляем по
строчкам кода который у нас будет
шифровать паролей чтобы они у нас не
хранились в явном виде
но пока мы только делаем предварительную
настройку мы можем использовать но
опасно у нас тоже помечен как deep реке
тетка где брекете то у нас помечен ввиду
того что он носа жуткая legacy и вообще
нужен только для тестирования дальше мы
его заменим
следующим этапом нам нужно добавить
запросы юзера spice visions
к вере где мы пишем стелек и здесь нам
необходимо определенные поля username
password и как тех юзер нэйм равно
вопрос этот запрос нам необходимо для
того чтобы система могла найти
пользователя по его имени и нам нужны
вот именно вот эти три поля и именно в
таком порядке пользователь пароль и
признак активности порядок и набор полей
определены системой если мы что-то
поменяем то у нас обязательно что-нибудь
будет работать не так либо
скорее всего работает не будет вообще
этого нам будет недостаточно еще нам
нужен такой метод как а то эти сбои юзер
нэйм к вере этот запрос помогает
спаррингу получить список пользователей
с их ролями пишем select
user name
роль
объясняю этот запрос из таблицы юзер
присоединенный к ней таблицы и за роль
соединенные через поля и зирой diy а
идти
выбираем поля озерный и имя роли теперь
нам необходимо добавить страницу
регистрации новых пользователей так как
сейчас системе нас пользователя не для
этого идем к нашим там плейтом и для
начала просто скопируем логин
переименовав его
регистре шин добавляемого гид и здесь
меня его плагина реки с живейшим поля
оставляем все те же самые подпишем что
это у нас это не везет и нам еще на
страничке логина нужно добавить ссылку
на страницу регистрации
слегка модифицировали теперь нам
необходимо добавить контролем так и
гредин контроллер у нас уже достаточно
пухлые в нем уже слишком много логики мы
пожалуй выделим новый контроллер начнем
с создания нового пакета который назовем
контроля
ok перетащим туда наш существующий
контроллер вообще как бы надо бы его
переименовать и факторы не пускает у нас
будет моим контролем
создаем новый контроллер который назовем
быстрейшим помечаем что это контроллер
именно и создаем новый get me pink
который indis public string который нас
будет просто возвращать view и создаем
пост мэппинг пост мэппинг для int point
а также регис новейшим public string
юзер пускает называться метод чтобы не
путаться здесь нам понадобится некоторая
хитрость при успешной авторизации мы
будем делать редирект на страницу логина
приходите нас сюда будет пользователь
теперь нам нужно искать пользователя для
того чтобы нам найти пользователя нам
необходимо создать новые пози торе и для
пользователей
юзер репа только это не класса интерфейс
и он у нас расширяет же по
репозитории здесь помещаем юзер иланг
отлично нам нужен метод который будет
возвращать пользователя и
называться он будет find buy you зерна и
принимать он будет строку user name
если вы не помните как пишут такие
методы в репозиториях в описании
посмотрите там будет ссылочка на
инструкцию на сайте спринга
создали эти перейдем обратно в
контроллер регистрации
и здесь нам нужно завтра варить наш
репозитории
твой рот при вас есть все репо и
юзеры по отлично так сделаем везет репо
фанбой зерна и делаем user guide
визирной помещаем все это дело
переменную user
кром baby пускай если у нас везет from
тебе не равен нулю
то нам нужно будет сообщить на экране
значит здесь добавляем мэп string и это
у нас будет модель и в модель мы
помещаем массаж массаж который мы пишем
weather и возвращаем из решим страничку
то есть если у нас такой пользователю
базе данных уже есть мы сообщаем об этом
на страничке регистрации и здесь
добавляем проверку если у нас
то то есть если у нас присутствует такой
полет массаж она у нас будет иисус не
всегда мы его показываем отлично
возвращаемся в контроллер и теперь нам
нужно обработать если у нас все таки
пользователя такого еще нет пользователь
нас приходит пустой практически
активность мы поставим true
у нас новый сразу будет активный зададим
ему роль collections синглтон что это
такое то есть здесь у нас ожидается на
вход коллекция виде сета
но так как у нас всего одно значение мы
можем использовать такой шоткат из
библиотеки который создает сет с
одним-единственным значением вроде бы
все теперь попробуем совсем эти
взлететь взлетели надеюсь не упадём идем
на главную страничку этим пейдж
добавляем у пользователя но
пользователям добавить не можем потому
что мы забыли важную вещь вращаемся
критик контроллер и здесь добавляем
и
иди с решим наша страничка
не разрешено поэтому нас сюда и не пуска
пробуем залогиниться создаем нового у
пользователя и и один создан
разлогиниться что-то пошло не так
контроллер анода репозиторий и по so
i've ever
забыли сохранить пользователя перед
спускаемся идем на главную страницу
добавляем пользователя логинимся и всем
и залогинились
пользователя с базы данных на этом всё
ставьте лайки пишите комментарии
делитесь видео в социальных сетях и
конечно же подписывайтесь
чем больше лайков подписок тем больше
видео всем спасибо всем пока
привет это канал и скот меня зовут
андрей продолжаем разбираться со
спаррингом сегодня мы к нашему
предложению свитер прикрутим
дополнительно авторизацию то есть это
spring security
возвращаемся на спринга и о переходе в
раздел гаец и строке поиска в гайдах
пишем секирин находим вот такой секретик
а вы про пикаешь заходим этот гайд
ссылочку я приложу в описании к видео и
видим что сразу нам здесь предлагает
сделать страничку хум хум страничку нас
уже есть только называется она у нас
грязинг мы сейчас ей мы переделаем что
по названию рейтинг корень страничку мы
не заметим как раз нам и рут и здесь
соответственно нужно сделать мы после
этого идем на страничку грешник здесь
убираем
не мы пишем юзер так здесь у нас будет
ссылочка на зиму ссылочку за хорошим
который будет как раз вести нами и пишем
но здесь вот мне нужна такая штучка есть
и соответственно это тоже уберем потому
что мы теперь на полстранички ничего не
принимаем
смотрим что у нас там дальше по
инструкции так и есть но ссылка на
какую-то страничку внутреннего хоккей и
там уже сделали страничка внутренние у
нас тоже уже есть это как раз наш main и
видим нечто новое о нам предлагает
сделать весь секунд файл копируем
заходим в наше приложение создаем новый
пакет конфиг конфиг и в нем создаем и
весь в висе вставляем то что теперь она
копировать что это такое это класс
который у нас содержит конфигурацию
нашего вот слоя и здесь как раз тот
случай когда нам не нужно создавать свой
контроллер
у нас здесь раздаются страничке которые
просто шаблон описаны на них нет никакой
логики нас нам олечка не устраивает нам
здесь вот это не надо потому что мы это
все нужно мы пили
нам нужен только от логин здесь
получается spring уже представляет на
систему авторизации нам нужно просто
активизировать да вот мы создаем свой
screen влаги на потому что у нас не
устроит какой-то там системы мы хотим
свой но логика нас вполне устраивает
системная поэтому просто вешаем
на лаги и указываем что нам нужен
logging шаблон который у нас пока что
еще нет идет дальше и смотрим что
система нам предлагает дальше настроить
spring security до добавить зависимой
зависимости у нас пока что нету копируем
и идем в наш по максималь и здесь
добавляем зависимость пишем security
идем дальше смотрим что у нас тут еще
происходит нам предлагается бы создать
чуевым security конфиг хорошо не будем
сопротивляться копируем идем опять в
конфиг и создаем новый класс который
называем web security config ну пока что
у нас здесь все устраивает только у нас
здесь вот он нам не нужен поэтому его
убираем сразу что мы здесь делаем это
класс который при старте приложения
конфигурирует web security system
заходит сюда передает на вход объект и
мы в нем включаем авторизацию указываем
что для вот этого пути на главный
строчкам который приходит пользователь
мы разрешаем полный доступ для всех
остальных запросов мы требуем
авторизацию сделаем вот так как бы
принято читабельность повышает вот так
логин пейдж нас находится на такой
маппинге
и разрешаем этим пользоваться всем и так
же еще включаем лагов и разрешаем им
пользоваться также всем здесь у нас
озеро tl сервис будет выдаваться системе
по требованию таким методом он на
создает в памяти менеджер который у нас
обслуживает записи учетные сократим
потому что мне лень его писать так много
букв авторизации
но metric села фиксов он помечен как
депре кейт а потому что он нужен только
для отладки ничего не шифрует ничего не
хранить при каждом перезапуске
приложения он замок создают пользователи
и собственно все идем дальше в
инструкция ага теперь нам предлагает
создать шаблон для логина копипастим не
надо переживать что я пропагандирую
copy-paste просто на этапе пока мы
обучаемся это наиболее простой способ
получить быстрый результат и
не потерять интерес к разработке то
дальнейшем и это все по выпиливаем и
copy-paste у нас будет ноль но мне нужно
time left
так эти строчки нам тоже не нужно и
здесь очищаем мусор все у нас получился
валидный
шаблон для пустошь форму логина
единственное что переименовать ее надо
свадьбы система или равно стаж теперь
нам предлагают на страничку нашего
лендинга
добавить кнопочку локаута не будем
сопротивляться они этот милый мир это у
нас главной страничке проект значит мы
добавляем кнопочку локаута так мы
добавили страничку локаута на нашу форму
которую пользователь видит только после
авторизации замечательное идем дальше
смотрим делаем наше приложение забитый
гол
это пока рановато нам нужно еще добавить
одну замечательную штуку здесь так как
мы используем усташ у нас не будет
автоматического пробрасывать офицеров
что такое сесарев это замечательная вещь
которая позволяет вам избежать хакерских
атак на ваш сайт то есть
обращаться к вашему серверу отправлять
него какие-то данные могут только те
страничке тот кот на java скрипте у
которого есть соответствующий токен
выданный сервером случае с там лифом
spring подсовывает его незаметно и сам
все там согласует так как мы работаем с
пустошь нам нужно выполнить кое-какие
настроечки идем в диск ссылочка на
которые я прикладываю описании к видео и
копируем вот эту строчку
то эта строчка дело она включает
дополнительные атрибуты для пустошь
spring комиссии в контроллере будет
отдавать дополнительные параметры и они
будут переходить шаблон теперь идем на
страничку логина и здесь добавляем
невидимое поле input так хи ду на и
подчёркивание си си и вылил выражением
усташ котором мы напишем csr с таким
теперь мы копируем это поле и вставляем
его
файл моему стаж здесь у нас для каждой
формочки нужно добавить эту поле потому
что любой запрос который не будет
сопровождаться этим токина он будет то
есть все формочки они будут просто
сервером
игнорироваться так попробуем запустить
приложение видим что у нас открылся в
день я переходим посылочки моим пейдж
форму логина
вводим учетные данные и попадаем на
страничку приложения проверим что все
работает все работает действительно
сходим на главную страничку на монтаж да
всем и авторизованы больше нам
залогиниться не предлагают теперь
попробуем сами out и здесь бы неплохо
добавить страничку замечательно у нас
перебрасывает на воде все работает как я
уже говорил использовать авторизацию и
намерен не очень удобно и каждого
пользователя вам придется добавлять
руками добавим возможность
самостоятельной авторизации для этого
нам необходимо хранить пользователей в
базе данных
немножечко модифицируем указанный код
для начала добавим объект базы данных
пользователь юзер и дополнительный
объект который не будет напрямую
хранится в базе данных
а как бы немножечко опосредованно эта
роль только роль это будет и нам то есть
перечисления им за не будет пока что все
вот на записи the used теперь я можно
закрыть и вернуться пользователь
пользователь помечаем что это entity
и хранится он будет в табличке с именем
you закат почему не юзер потому что под
крест не очень любит таблички которые
совпадают по имени с какими ключевыми
словами у него уже есть ручка юзер
которая соответственно
что занята теперь создаем поля айди
которая будет киннер этот и также
auto мы не хотим заморачиваться по
поводу генерация идиш ников пусть это
делает база данных wang
айди также у нас в пользователя будет
имя и жирные
также у нашего пользователя будет
password и в нашего пользователя будет
признак активности еще наших
пользователей будет ролевая система то
привилегированный пользователь
например модератор поэтому создаем
приватные от поля который будет
содержать в себе сэт ролей роли так как
раз финам который мы создали заранее и
называться будет роли
здесь нам необходимо добавить аннотации
во первых элемент collection которая
позволяет нам избавиться от головной
боли по формированию дополнительно
таблицы для хранения и нам а
и нам не такая сложная структура что там
что-то городить совсем особенное fitch
что такое fitch это параметр который
определяет как данные значение будут
погружаться относительно основной
сущности когда мы загружаем пользователь
роли его хранятся в отдельной таблицы и
нам необходимы и сгружать либо жадным
способом либо ленивым чем разница жадные
это
гипернет сразу же при запросе
пользователя будет держать все его роли
в случае с ленивой подгрузкой он
погрузит роли
только когда пользователи реально
обратиться к этому полю соответственно и
хорош когда у нас мало данных как в
случае с ролями это ускоряет работу но
потребляют немножко больше памяти ализе
хорош когда у нас много записей хранится
здесь например класс институт и он может
удержать себе несколько тысяч студентов
нам не нужно погружать всех студентов
сразу они нам нужны по мере
необходимости соответственно здесь лучше
поставить lazy
объект будет более легковесную но когда
мы обратимся к полю пройдёт некоторое
количество времени прежде чем
систему подгрузить записей из базы
данных нам здесь нужно ли жадная
подгрузка поэтому утром игр
следующая нотация kollection ты его она
описывает что данное поле у нас будет
храниться в отделе таблица для которой
мы не описывали мэт и пишем название
таблицы use of роль джейн коулс
здесь она сложена этот ужин колун
который мы пишем который у нас будет
называться иди юзер точнее use ради
это нам позволяет создать табличку для
вот этого набора ролей табличку и за
роль который будет соединяться с текущей
табличкой через озеро идеи нам нужно
указать что это у нас и но это и
установить что мы хотим его этот и нам
хранить в виде строки перегенерируем
геттер и сеттер
теперь нам нужно настроить
web security конфиг этот метод мы
удаляем потому что мы больше не хотим
использовать номере менеджеры мы хотим
брать пользователей из базы данных для
этого мы переопределяем метод конфигов
опыт конечный менеджер builder вот этот
и здесь две бисеринки кейша datasource
на нужен этого мы завтра варим метод так
у нас остались
неиспользуемые импорт и убираем их
делаем авто варит привык data sources of
the source нас генерируется spring и мы
его можем легко получить
направляем эти сос datasource нам нужен
для того чтобы мы номер мог ходить в
базу данных искать там пользователя их
роли следующим этапом добавляем по
строчкам кода который у нас будет
шифровать паролей чтобы они у нас не
хранились в явном виде
но пока мы только делаем предварительную
настройку мы можем использовать но
опасно у нас тоже помечен как deep реке
тетка где брекете то у нас помечен ввиду
того что он носа жуткая legacy и вообще
нужен только для тестирования дальше мы
его заменим
следующим этапом нам нужно добавить
запросы юзера spice visions
к вере где мы пишем стелек и здесь нам
необходимо определенные поля username
password и как тех юзер нэйм равно
вопрос этот запрос нам необходимо для
того чтобы система могла найти
пользователя по его имени и нам нужны
вот именно вот эти три поля и именно в
таком порядке пользователь пароль и
признак активности порядок и набор полей
определены системой если мы что-то
поменяем то у нас обязательно что-нибудь
будет работать не так либо
скорее всего работает не будет вообще
этого нам будет недостаточно еще нам
нужен такой метод как а то эти сбои юзер
нэйм к вере этот запрос помогает
спаррингу получить список пользователей
с их ролями пишем select
user name
роль
объясняю этот запрос из таблицы юзер
присоединенный к ней таблицы и за роль
соединенные через поля и зирой diy а
идти
выбираем поля озерный и имя роли теперь
нам необходимо добавить страницу
регистрации новых пользователей так как
сейчас системе нас пользователя не для
этого идем к нашим там плейтом и для
начала просто скопируем логин
переименовав его
регистре шин добавляемого гид и здесь
меня его плагина реки с живейшим поля
оставляем все те же самые подпишем что
это у нас это не везет и нам еще на
страничке логина нужно добавить ссылку
на страницу регистрации
слегка модифицировали теперь нам
необходимо добавить контролем так и
гредин контроллер у нас уже достаточно
пухлые в нем уже слишком много логики мы
пожалуй выделим новый контроллер начнем
с создания нового пакета который назовем
контроля
ok перетащим туда наш существующий
контроллер вообще как бы надо бы его
переименовать и факторы не пускает у нас
будет моим контролем
создаем новый контроллер который назовем
быстрейшим помечаем что это контроллер
именно и создаем новый get me pink
который indis public string который нас
будет просто возвращать view и создаем
пост мэппинг пост мэппинг для int point
а также регис новейшим public string
юзер пускает называться метод чтобы не
путаться здесь нам понадобится некоторая
хитрость при успешной авторизации мы
будем делать редирект на страницу логина
приходите нас сюда будет пользователь
теперь нам нужно искать пользователя для
того чтобы нам найти пользователя нам
необходимо создать новые пози торе и для
пользователей
юзер репа только это не класса интерфейс
и он у нас расширяет же по
репозитории здесь помещаем юзер иланг
отлично нам нужен метод который будет
возвращать пользователя и
называться он будет find buy you зерна и
принимать он будет строку user name
если вы не помните как пишут такие
методы в репозиториях в описании
посмотрите там будет ссылочка на
инструкцию на сайте спринга
создали эти перейдем обратно в
контроллер регистрации
и здесь нам нужно завтра варить наш
репозитории
твой рот при вас есть все репо и
юзеры по отлично так сделаем везет репо
фанбой зерна и делаем user guide
визирной помещаем все это дело
переменную user
кром baby пускай если у нас везет from
тебе не равен нулю
то нам нужно будет сообщить на экране
значит здесь добавляем мэп string и это
у нас будет модель и в модель мы
помещаем массаж массаж который мы пишем
weather и возвращаем из решим страничку
то есть если у нас такой пользователю
базе данных уже есть мы сообщаем об этом
на страничке регистрации и здесь
добавляем проверку если у нас
то то есть если у нас присутствует такой
полет массаж она у нас будет иисус не
всегда мы его показываем отлично
возвращаемся в контроллер и теперь нам
нужно обработать если у нас все таки
пользователя такого еще нет пользователь
нас приходит пустой практически
активность мы поставим true
у нас новый сразу будет активный зададим
ему роль collections синглтон что это
такое то есть здесь у нас ожидается на
вход коллекция виде сета
но так как у нас всего одно значение мы
можем использовать такой шоткат из
библиотеки который создает сет с
одним-единственным значением вроде бы
все теперь попробуем совсем эти
взлететь взлетели надеюсь не упадём идем
на главную страничку этим пейдж
добавляем у пользователя но
пользователям добавить не можем потому
что мы забыли важную вещь вращаемся
критик контроллер и здесь добавляем
и
иди с решим наша страничка
не разрешено поэтому нас сюда и не пуска
пробуем залогиниться создаем нового у
пользователя и и один создан
разлогиниться что-то пошло не так
контроллер анода репозиторий и по so
i've ever
забыли сохранить пользователя перед
спускаемся идем на главную страницу
добавляем пользователя логинимся и всем
и залогинились
пользователя с базы данных на этом всё
ставьте лайки пишите комментарии
делитесь видео в социальных сетях и
конечно же подписывайтесь
чем больше лайков подписок тем больше
видео всем спасибо всем пока


привет это канал и скот меня зовут


андрей продолжаем разбираться со


спаррингом сегодня мы к нашему


предложению свитер прикрутим


дополнительно авторизацию то есть это


spring security


возвращаемся на спринга и о переходе в


раздел гаец и строке поиска в гайдах


пишем секирин находим вот такой секретик


а вы про пикаешь заходим этот гайд


ссылочку я приложу в описании к видео и


видим что сразу нам здесь предлагает


сделать страничку хум хум страничку нас


уже есть только называется она у нас


грязинг мы сейчас ей мы переделаем что


по названию рейтинг корень страничку мы


не заметим как раз нам и рут и здесь


соответственно нужно сделать мы после


этого идем на страничку грешник здесь


убираем


не мы пишем юзер так здесь у нас будет


ссылочка на зиму ссылочку за хорошим


который будет как раз вести нами и пишем






но здесь вот мне нужна такая штучка есть


и соответственно это тоже уберем потому


что мы теперь на полстранички ничего не


принимаем


смотрим что у нас там дальше по


инструкции так и есть но ссылка на


какую-то страничку внутреннего хоккей и


там уже сделали страничка внутренние у


нас тоже уже есть это как раз наш main и


видим нечто новое о нам предлагает


сделать весь секунд файл копируем


заходим в наше приложение создаем новый


пакет конфиг конфиг и в нем создаем и


весь в висе вставляем то что теперь она


копировать что это такое это класс


который у нас содержит конфигурацию


нашего вот слоя и здесь как раз тот


случай когда нам не нужно создавать свой


контроллер


у нас здесь раздаются страничке которые


просто шаблон описаны на них нет никакой


логики нас нам олечка не устраивает нам


здесь вот это не надо потому что мы это


все нужно мы пили


нам нужен только от логин здесь


получается spring уже представляет на


систему авторизации нам нужно просто


активизировать да вот мы создаем свой


screen влаги на потому что у нас не


устроит какой-то там системы мы хотим


свой но логика нас вполне устраивает


системная поэтому просто вешаем


на лаги и указываем что нам нужен


logging шаблон который у нас пока что


еще нет идет дальше и смотрим что


система нам предлагает дальше настроить


spring security до добавить зависимой


зависимости у нас пока что нету копируем


и идем в наш по максималь и здесь


добавляем зависимость пишем security


идем дальше смотрим что у нас тут еще


происходит нам предлагается бы создать


чуевым security конфиг хорошо не будем


сопротивляться копируем идем опять в


конфиг и создаем новый класс который


называем web security config ну пока что


у нас здесь все устраивает только у нас


здесь вот он нам не нужен поэтому его


убираем сразу что мы здесь делаем это


класс который при старте приложения


конфигурирует web security system


заходит сюда передает на вход объект и


мы в нем включаем авторизацию указываем


что для вот этого пути на главный


строчкам который приходит пользователь


мы разрешаем полный доступ для всех


остальных запросов мы требуем


авторизацию сделаем вот так как бы


принято читабельность повышает вот так






логин пейдж нас находится на такой


маппинге


и разрешаем этим пользоваться всем и так


же еще включаем лагов и разрешаем им


пользоваться также всем здесь у нас


озеро tl сервис будет выдаваться системе


по требованию таким методом он на


создает в памяти менеджер который у нас


обслуживает записи учетные сократим


потому что мне лень его писать так много


букв авторизации


но metric села фиксов он помечен как


депре кейт а потому что он нужен только


для отладки ничего не шифрует ничего не


хранить при каждом перезапуске


приложения он замок создают пользователи


и собственно все идем дальше в


инструкция ага теперь нам предлагает


создать шаблон для логина копипастим не


надо переживать что я пропагандирую


copy-paste просто на этапе пока мы


обучаемся это наиболее простой способ


получить быстрый результат и


не потерять интерес к разработке то


дальнейшем и это все по выпиливаем и


copy-paste у нас будет ноль но мне нужно


time left


так эти строчки нам тоже не нужно и


здесь очищаем мусор все у нас получился


валидный


шаблон для пустошь форму логина


единственное что переименовать ее надо


свадьбы система или равно стаж теперь


нам предлагают на страничку нашего


лендинга


добавить кнопочку локаута не будем


сопротивляться они этот милый мир это у


нас главной страничке проект значит мы


добавляем кнопочку локаута так мы


добавили страничку локаута на нашу форму


которую пользователь видит только после


авторизации замечательное идем дальше


смотрим делаем наше приложение забитый


гол


это пока рановато нам нужно еще добавить


одну замечательную штуку здесь так как


мы используем усташ у нас не будет


автоматического пробрасывать офицеров


что такое сесарев это замечательная вещь


которая позволяет вам избежать хакерских


атак на ваш сайт то есть


обращаться к вашему серверу отправлять


него какие-то данные могут только те


страничке тот кот на java скрипте у


которого есть соответствующий токен


выданный сервером случае с там лифом


spring подсовывает его незаметно и сам


все там согласует так как мы работаем с


пустошь нам нужно выполнить кое-какие


настроечки идем в диск ссылочка на


которые я прикладываю описании к видео и


копируем вот эту строчку


то эта строчка дело она включает


дополнительные атрибуты для пустошь


spring комиссии в контроллере будет


отдавать дополнительные параметры и они


будут переходить шаблон теперь идем на


страничку логина и здесь добавляем


невидимое поле input так хи ду на и


подчёркивание си си и вылил выражением


усташ котором мы напишем csr с таким


теперь мы копируем это поле и вставляем


его


файл моему стаж здесь у нас для каждой


формочки нужно добавить эту поле потому


что любой запрос который не будет


сопровождаться этим токина он будет то


есть все формочки они будут просто


сервером


игнорироваться так попробуем запустить


приложение видим что у нас открылся в


день я переходим посылочки моим пейдж


форму логина


вводим учетные данные и попадаем на


страничку приложения проверим что все


работает все работает действительно


сходим на главную страничку на монтаж да


всем и авторизованы больше нам


залогиниться не предлагают теперь


попробуем сами out и здесь бы неплохо


добавить страничку замечательно у нас


перебрасывает на воде все работает как я


уже говорил использовать авторизацию и


намерен не очень удобно и каждого


пользователя вам придется добавлять


руками добавим возможность


самостоятельной авторизации для этого


нам необходимо хранить пользователей в


базе данных


немножечко модифицируем указанный код


для начала добавим объект базы данных


пользователь юзер и дополнительный


объект который не будет напрямую


хранится в базе данных


а как бы немножечко опосредованно эта


роль только роль это будет и нам то есть


перечисления им за не будет пока что все


вот на записи the used теперь я можно


закрыть и вернуться пользователь


пользователь помечаем что это entity


и хранится он будет в табличке с именем


you закат почему не юзер потому что под


крест не очень любит таблички которые


совпадают по имени с какими ключевыми


словами у него уже есть ручка юзер


которая соответственно


что занята теперь создаем поля айди


которая будет киннер этот и также


auto мы не хотим заморачиваться по


поводу генерация идиш ников пусть это


делает база данных wang


айди также у нас в пользователя будет


имя и жирные


также у нашего пользователя будет


password и в нашего пользователя будет


признак активности еще наших


пользователей будет ролевая система то






привилегированный пользователь


например модератор поэтому создаем


приватные от поля который будет


содержать в себе сэт ролей роли так как


раз финам который мы создали заранее и


называться будет роли


здесь нам необходимо добавить аннотации


во первых элемент collection которая


позволяет нам избавиться от головной


боли по формированию дополнительно


таблицы для хранения и нам а


и нам не такая сложная структура что там


что-то городить совсем особенное fitch


что такое fitch это параметр который


определяет как данные значение будут


погружаться относительно основной


сущности когда мы загружаем пользователь


роли его хранятся в отдельной таблицы и


нам необходимы и сгружать либо жадным


способом либо ленивым чем разница жадные


это


гипернет сразу же при запросе


пользователя будет держать все его роли


в случае с ленивой подгрузкой он


погрузит роли


только когда пользователи реально


обратиться к этому полю соответственно и


хорош когда у нас мало данных как в


случае с ролями это ускоряет работу но


потребляют немножко больше памяти ализе


хорош когда у нас много записей хранится


здесь например класс институт и он может


удержать себе несколько тысяч студентов


нам не нужно погружать всех студентов


сразу они нам нужны по мере


необходимости соответственно здесь лучше


поставить lazy


объект будет более легковесную но когда


мы обратимся к полю пройдёт некоторое


количество времени прежде чем


систему подгрузить записей из базы


данных нам здесь нужно ли жадная


подгрузка поэтому утром игр


следующая нотация kollection ты его она


описывает что данное поле у нас будет


храниться в отделе таблица для которой


мы не описывали мэт и пишем название


таблицы use of роль джейн коулс


здесь она сложена этот ужин колун


который мы пишем который у нас будет


называться иди юзер точнее use ради


это нам позволяет создать табличку для


вот этого набора ролей табличку и за


роль который будет соединяться с текущей


табличкой через озеро идеи нам нужно


указать что это у нас и но это и


установить что мы хотим его этот и нам


хранить в виде строки перегенерируем


геттер и сеттер


теперь нам нужно настроить


web security конфиг этот метод мы


удаляем потому что мы больше не хотим


использовать номере менеджеры мы хотим


брать пользователей из базы данных для


этого мы переопределяем метод конфигов


опыт конечный менеджер builder вот этот


и здесь две бисеринки кейша datasource


на нужен этого мы завтра варим метод так


у нас остались


неиспользуемые импорт и убираем их


делаем авто варит привык data sources of


the source нас генерируется spring и мы


его можем легко получить


направляем эти сос datasource нам нужен


для того чтобы мы номер мог ходить в


базу данных искать там пользователя их


роли следующим этапом добавляем по


строчкам кода который у нас будет


шифровать паролей чтобы они у нас не


хранились в явном виде


но пока мы только делаем предварительную


настройку мы можем использовать но


опасно у нас тоже помечен как deep реке


тетка где брекете то у нас помечен ввиду


того что он носа жуткая legacy и вообще


нужен только для тестирования дальше мы


его заменим


следующим этапом нам нужно добавить


запросы юзера spice visions


к вере где мы пишем стелек и здесь нам


необходимо определенные поля username


password и как тех юзер нэйм равно


вопрос этот запрос нам необходимо для


того чтобы система могла найти


пользователя по его имени и нам нужны


вот именно вот эти три поля и именно в


таком порядке пользователь пароль и


признак активности порядок и набор полей


определены системой если мы что-то


поменяем то у нас обязательно что-нибудь


будет работать не так либо


скорее всего работает не будет вообще


этого нам будет недостаточно еще нам


нужен такой метод как а то эти сбои юзер


нэйм к вере этот запрос помогает


спаррингу получить список пользователей


с их ролями пишем select


user name


роль


объясняю этот запрос из таблицы юзер


присоединенный к ней таблицы и за роль


соединенные через поля и зирой diy а


идти


выбираем поля озерный и имя роли теперь


нам необходимо добавить страницу


регистрации новых пользователей так как


сейчас системе нас пользователя не для


этого идем к нашим там плейтом и для


начала просто скопируем логин


переименовав его


регистре шин добавляемого гид и здесь


меня его плагина реки с живейшим поля


оставляем все те же самые подпишем что


это у нас это не везет и нам еще на


страничке логина нужно добавить ссылку


на страницу регистрации


слегка модифицировали теперь нам


необходимо добавить контролем так и


гредин контроллер у нас уже достаточно


пухлые в нем уже слишком много логики мы


пожалуй выделим новый контроллер начнем


с создания нового пакета который назовем


контроля


ok перетащим туда наш существующий


контроллер вообще как бы надо бы его


переименовать и факторы не пускает у нас


будет моим контролем


создаем новый контроллер который назовем


быстрейшим помечаем что это контроллер


именно и создаем новый get me pink


который indis public string который нас


будет просто возвращать view и создаем


пост мэппинг пост мэппинг для int point


а также регис новейшим public string


юзер пускает называться метод чтобы не


путаться здесь нам понадобится некоторая


хитрость при успешной авторизации мы


будем делать редирект на страницу логина


приходите нас сюда будет пользователь


теперь нам нужно искать пользователя для


того чтобы нам найти пользователя нам


необходимо создать новые пози торе и для


пользователей


юзер репа только это не класса интерфейс


и он у нас расширяет же по


репозитории здесь помещаем юзер иланг


отлично нам нужен метод который будет


возвращать пользователя и


называться он будет find buy you зерна и


принимать он будет строку user name


если вы не помните как пишут такие


методы в репозиториях в описании


посмотрите там будет ссылочка на


инструкцию на сайте спринга


создали эти перейдем обратно в


контроллер регистрации


и здесь нам нужно завтра варить наш


репозитории


твой рот при вас есть все репо и


юзеры по отлично так сделаем везет репо


фанбой зерна и делаем user guide


визирной помещаем все это дело


переменную user


кром baby пускай если у нас везет from


тебе не равен нулю


то нам нужно будет сообщить на экране


значит здесь добавляем мэп string и это


у нас будет модель и в модель мы


помещаем массаж массаж который мы пишем


weather и возвращаем из решим страничку


то есть если у нас такой пользователю


базе данных уже есть мы сообщаем об этом


на страничке регистрации и здесь


добавляем проверку если у нас


то то есть если у нас присутствует такой


полет массаж она у нас будет иисус не


всегда мы его показываем отлично


возвращаемся в контроллер и теперь нам


нужно обработать если у нас все таки


пользователя такого еще нет пользователь


нас приходит пустой практически


активность мы поставим true


у нас новый сразу будет активный зададим


ему роль collections синглтон что это


такое то есть здесь у нас ожидается на


вход коллекция виде сета


но так как у нас всего одно значение мы


можем использовать такой шоткат из


библиотеки который создает сет с


одним-единственным значением вроде бы


все теперь попробуем совсем эти


взлететь взлетели надеюсь не упадём идем


на главную страничку этим пейдж


добавляем у пользователя но


пользователям добавить не можем потому


что мы забыли важную вещь вращаемся


критик контроллер и здесь добавляем


и


иди с решим наша страничка


не разрешено поэтому нас сюда и не пуска


пробуем залогиниться создаем нового у


пользователя и и один создан


разлогиниться что-то пошло не так


контроллер анода репозиторий и по so


i've ever


забыли сохранить пользователя перед


спускаемся идем на главную страницу


добавляем пользователя логинимся и всем


и залогинились


пользователя с базы данных на этом всё


ставьте лайки пишите комментарии


делитесь видео в социальных сетях и


конечно же подписывайтесь


чем больше лайков подписок тем больше


видео всем спасибо всем пока


привет это канал и скот меня зовут


андрей продолжаем разбираться со


спаррингом сегодня мы к нашему


предложению свитер прикрутим


дополнительно авторизацию то есть это


spring security


возвращаемся на спринга и о переходе в


раздел гаец и строке поиска в гайдах


пишем секирин находим вот такой секретик


а вы про пикаешь заходим этот гайд


ссылочку я приложу в описании к видео и


видим что сразу нам здесь предлагает


сделать страничку хум хум страничку нас


уже есть только называется она у нас


грязинг мы сейчас ей мы переделаем что


по названию рейтинг корень страничку мы


не заметим как раз нам и рут и здесь


соответственно нужно сделать мы после


этого идем на страничку грешник здесь


убираем


не мы пишем юзер так здесь у нас будет


ссылочка на зиму ссылочку за хорошим


который будет как раз вести нами и пишем






но здесь вот мне нужна такая штучка есть


и соответственно это тоже уберем потому


что мы теперь на полстранички ничего не


принимаем


смотрим что у нас там дальше по


инструкции так и есть но ссылка на


какую-то страничку внутреннего хоккей и


там уже сделали страничка внутренние у


нас тоже уже есть это как раз наш main и


видим нечто новое о нам предлагает


сделать весь секунд файл копируем


заходим в наше приложение создаем новый


пакет конфиг конфиг и в нем создаем и


весь в висе вставляем то что теперь она


копировать что это такое это класс


который у нас содержит конфигурацию


нашего вот слоя и здесь как раз тот


случай когда нам не нужно создавать свой


контроллер


у нас здесь раздаются страничке которые


просто шаблон описаны на них нет никакой


логики нас нам олечка не устраивает нам


здесь вот это не надо потому что мы это


все нужно мы пили


нам нужен только от логин здесь


получается spring уже представляет на


систему авторизации нам нужно просто


активизировать да вот мы создаем свой


screen влаги на потому что у нас не


устроит какой-то там системы мы хотим


свой но логика нас вполне устраивает


системная поэтому просто вешаем


на лаги и указываем что нам нужен


logging шаблон который у нас пока что


еще нет идет дальше и смотрим что


система нам предлагает дальше настроить


spring security до добавить зависимой


зависимости у нас пока что нету копируем


и идем в наш по максималь и здесь


добавляем зависимость пишем security


идем дальше смотрим что у нас тут еще


происходит нам предлагается бы создать


чуевым security конфиг хорошо не будем


сопротивляться копируем идем опять в


конфиг и создаем новый класс который


называем web security config ну пока что


у нас здесь все устраивает только у нас


здесь вот он нам не нужен поэтому его


убираем сразу что мы здесь делаем это


класс который при старте приложения


конфигурирует web security system


заходит сюда передает на вход объект и


мы в нем включаем авторизацию указываем


что для вот этого пути на главный


строчкам который приходит пользователь


мы разрешаем полный доступ для всех


остальных запросов мы требуем


авторизацию сделаем вот так как бы


принято читабельность повышает вот так






логин пейдж нас находится на такой


маппинге


и разрешаем этим пользоваться всем и так


же еще включаем лагов и разрешаем им


пользоваться также всем здесь у нас


озеро tl сервис будет выдаваться системе


по требованию таким методом он на


создает в памяти менеджер который у нас


обслуживает записи учетные сократим


потому что мне лень его писать так много


букв авторизации


но metric села фиксов он помечен как


депре кейт а потому что он нужен только


для отладки ничего не шифрует ничего не


хранить при каждом перезапуске


приложения он замок создают пользователи


и собственно все идем дальше в


инструкция ага теперь нам предлагает


создать шаблон для логина копипастим не


надо переживать что я пропагандирую


copy-paste просто на этапе пока мы


обучаемся это наиболее простой способ


получить быстрый результат и


не потерять интерес к разработке то


дальнейшем и это все по выпиливаем и


copy-paste у нас будет ноль но мне нужно


time left


так эти строчки нам тоже не нужно и


здесь очищаем мусор все у нас получился


валидный


шаблон для пустошь форму логина


единственное что переименовать ее надо


свадьбы система или равно стаж теперь


нам предлагают на страничку нашего


лендинга


добавить кнопочку локаута не будем


сопротивляться они этот милый мир это у


нас главной страничке проект значит мы


добавляем кнопочку локаута так мы


добавили страничку локаута на нашу форму


которую пользователь видит только после


авторизации замечательное идем дальше


смотрим делаем наше приложение забитый


гол


это пока рановато нам нужно еще добавить


одну замечательную штуку здесь так как


мы используем усташ у нас не будет


автоматического пробрасывать офицеров


что такое сесарев это замечательная вещь


которая позволяет вам избежать хакерских


атак на ваш сайт то есть


обращаться к вашему серверу отправлять


него какие-то данные могут только те


страничке тот кот на java скрипте у


которого есть соответствующий токен


выданный сервером случае с там лифом


spring подсовывает его незаметно и сам


все там согласует так как мы работаем с


пустошь нам нужно выполнить кое-какие


настроечки идем в диск ссылочка на


которые я прикладываю описании к видео и


копируем вот эту строчку


то эта строчка дело она включает


дополнительные атрибуты для пустошь


spring комиссии в контроллере будет


отдавать дополнительные параметры и они


будут переходить шаблон теперь идем на


страничку логина и здесь добавляем


невидимое поле input так хи ду на и


подчёркивание си си и вылил выражением


усташ котором мы напишем csr с таким


теперь мы копируем это поле и вставляем


его


файл моему стаж здесь у нас для каждой


формочки нужно добавить эту поле потому


что любой запрос который не будет


сопровождаться этим токина он будет то


есть все формочки они будут просто


сервером


игнорироваться так попробуем запустить


приложение видим что у нас открылся в


день я переходим посылочки моим пейдж


форму логина


вводим учетные данные и попадаем на


страничку приложения проверим что все


работает все работает действительно


сходим на главную страничку на монтаж да


всем и авторизованы больше нам


залогиниться не предлагают теперь


попробуем сами out и здесь бы неплохо


добавить страничку замечательно у нас


перебрасывает на воде все работает как я


уже говорил использовать авторизацию и


намерен не очень удобно и каждого


пользователя вам придется добавлять


руками добавим возможность


самостоятельной авторизации для этого


нам необходимо хранить пользователей в


базе данных


немножечко модифицируем указанный код


для начала добавим объект базы данных


пользователь юзер и дополнительный


объект который не будет напрямую


хранится в базе данных


а как бы немножечко опосредованно эта


роль только роль это будет и нам то есть


перечисления им за не будет пока что все


вот на записи the used теперь я можно


закрыть и вернуться пользователь


пользователь помечаем что это entity


и хранится он будет в табличке с именем


you закат почему не юзер потому что под


крест не очень любит таблички которые


совпадают по имени с какими ключевыми


словами у него уже есть ручка юзер


которая соответственно


что занята теперь создаем поля айди


которая будет киннер этот и также


auto мы не хотим заморачиваться по


поводу генерация идиш ников пусть это


делает база данных wang


айди также у нас в пользователя будет


имя и жирные


также у нашего пользователя будет


password и в нашего пользователя будет


признак активности еще наших


пользователей будет ролевая система то






привилегированный пользователь


например модератор поэтому создаем


приватные от поля который будет


содержать в себе сэт ролей роли так как


раз финам который мы создали заранее и


называться будет роли


здесь нам необходимо добавить аннотации


во первых элемент collection которая


позволяет нам избавиться от головной


боли по формированию дополнительно


таблицы для хранения и нам а


и нам не такая сложная структура что там


что-то городить совсем особенное fitch


что такое fitch это параметр который


определяет как данные значение будут


погружаться относительно основной


сущности когда мы загружаем пользователь


роли его хранятся в отдельной таблицы и


нам необходимы и сгружать либо жадным


способом либо ленивым чем разница жадные


это


гипернет сразу же при запросе


пользователя будет держать все его роли


в случае с ленивой подгрузкой он


погрузит роли


только когда пользователи реально


обратиться к этому полю соответственно и


хорош когда у нас мало данных как в


случае с ролями это ускоряет работу но


потребляют немножко больше памяти ализе


хорош когда у нас много записей хранится


здесь например класс институт и он может


удержать себе несколько тысяч студентов


нам не нужно погружать всех студентов


сразу они нам нужны по мере


необходимости соответственно здесь лучше


поставить lazy


объект будет более легковесную но когда


мы обратимся к полю пройдёт некоторое


количество времени прежде чем


систему подгрузить записей из базы


данных нам здесь нужно ли жадная


подгрузка поэтому утром игр


следующая нотация kollection ты его она


описывает что данное поле у нас будет


храниться в отделе таблица для которой


мы не описывали мэт и пишем название


таблицы use of роль джейн коулс


здесь она сложена этот ужин колун


который мы пишем который у нас будет


называться иди юзер точнее use ради


это нам позволяет создать табличку для


вот этого набора ролей табличку и за


роль который будет соединяться с текущей


табличкой через озеро идеи нам нужно


указать что это у нас и но это и


установить что мы хотим его этот и нам


хранить в виде строки перегенерируем


геттер и сеттер


теперь нам нужно настроить


web security конфиг этот метод мы


удаляем потому что мы больше не хотим


использовать номере менеджеры мы хотим


брать пользователей из базы данных для


этого мы переопределяем метод конфигов


опыт конечный менеджер builder вот этот


и здесь две бисеринки кейша datasource


на нужен этого мы завтра варим метод так


у нас остались


неиспользуемые импорт и убираем их


делаем авто варит привык data sources of


the source нас генерируется spring и мы


его можем легко получить


направляем эти сос datasource нам нужен


для того чтобы мы номер мог ходить в


базу данных искать там пользователя их


роли следующим этапом добавляем по


строчкам кода который у нас будет


шифровать паролей чтобы они у нас не


хранились в явном виде


но пока мы только делаем предварительную


настройку мы можем использовать но


опасно у нас тоже помечен как deep реке


тетка где брекете то у нас помечен ввиду


того что он носа жуткая legacy и вообще


нужен только для тестирования дальше мы


его заменим


следующим этапом нам нужно добавить


запросы юзера spice visions


к вере где мы пишем стелек и здесь нам


необходимо определенные поля username


password и как тех юзер нэйм равно


вопрос этот запрос нам необходимо для


того чтобы система могла найти


пользователя по его имени и нам нужны


вот именно вот эти три поля и именно в


таком порядке пользователь пароль и


признак активности порядок и набор полей


определены системой если мы что-то


поменяем то у нас обязательно что-нибудь


будет работать не так либо


скорее всего работает не будет вообще


этого нам будет недостаточно еще нам


нужен такой метод как а то эти сбои юзер


нэйм к вере этот запрос помогает


спаррингу получить список пользователей


с их ролями пишем select


user name


роль


объясняю этот запрос из таблицы юзер


присоединенный к ней таблицы и за роль


соединенные через поля и зирой diy а


идти


выбираем поля озерный и имя роли теперь


нам необходимо добавить страницу


регистрации новых пользователей так как


сейчас системе нас пользователя не для


этого идем к нашим там плейтом и для


начала просто скопируем логин


переименовав его


регистре шин добавляемого гид и здесь


меня его плагина реки с живейшим поля


оставляем все те же самые подпишем что


это у нас это не везет и нам еще на


страничке логина нужно добавить ссылку


на страницу регистрации


слегка модифицировали теперь нам


необходимо добавить контролем так и


гредин контроллер у нас уже достаточно


пухлые в нем уже слишком много логики мы


пожалуй выделим новый контроллер начнем


с создания нового пакета который назовем


контроля


ok перетащим туда наш существующий


контроллер вообще как бы надо бы его


переименовать и факторы не пускает у нас


будет моим контролем


создаем новый контроллер который назовем


быстрейшим помечаем что это контроллер


именно и создаем новый get me pink


который indis public string который нас


будет просто возвращать view и создаем


пост мэппинг пост мэппинг для int point


а также регис новейшим public string


юзер пускает называться метод чтобы не


путаться здесь нам понадобится некоторая


хитрость при успешной авторизации мы


будем делать редирект на страницу логина


приходите нас сюда будет пользователь


теперь нам нужно искать пользователя для


того чтобы нам найти пользователя нам


необходимо создать новые пози торе и для


пользователей


юзер репа только это не класса интерфейс


и он у нас расширяет же по


репозитории здесь помещаем юзер иланг


отлично нам нужен метод который будет


возвращать пользователя и


называться он будет find buy you зерна и


принимать он будет строку user name


если вы не помните как пишут такие


методы в репозиториях в описании


посмотрите там будет ссылочка на


инструкцию на сайте спринга


создали эти перейдем обратно в


контроллер регистрации


и здесь нам нужно завтра варить наш


репозитории


твой рот при вас есть все репо и


юзеры по отлично так сделаем везет репо


фанбой зерна и делаем user guide


визирной помещаем все это дело


переменную user


кром baby пускай если у нас везет from


тебе не равен нулю


то нам нужно будет сообщить на экране


значит здесь добавляем мэп string и это


у нас будет модель и в модель мы


помещаем массаж массаж который мы пишем


weather и возвращаем из решим страничку


то есть если у нас такой пользователю


базе данных уже есть мы сообщаем об этом


на страничке регистрации и здесь


добавляем проверку если у нас


то то есть если у нас присутствует такой


полет массаж она у нас будет иисус не


всегда мы его показываем отлично


возвращаемся в контроллер и теперь нам


нужно обработать если у нас все таки


пользователя такого еще нет пользователь


нас приходит пустой практически


активность мы поставим true


у нас новый сразу будет активный зададим


ему роль collections синглтон что это


такое то есть здесь у нас ожидается на


вход коллекция виде сета


но так как у нас всего одно значение мы


можем использовать такой шоткат из


библиотеки который создает сет с


одним-единственным значением вроде бы


все теперь попробуем совсем эти


взлететь взлетели надеюсь не упадём идем


на главную страничку этим пейдж


добавляем у пользователя но


пользователям добавить не можем потому


что мы забыли важную вещь вращаемся


критик контроллер и здесь добавляем


и


иди с решим наша страничка


не разрешено поэтому нас сюда и не пуска


пробуем залогиниться создаем нового у


пользователя и и один создан


разлогиниться что-то пошло не так


контроллер анода репозиторий и по so


i've ever


забыли сохранить пользователя перед


спускаемся идем на главную страницу


добавляем пользователя логинимся и всем


и залогинились


пользователя с базы данных на этом всё


ставьте лайки пишите комментарии


делитесь видео в социальных сетях и


конечно же подписывайтесь


чем больше лайков подписок тем больше


видео всем спасибо всем пока
